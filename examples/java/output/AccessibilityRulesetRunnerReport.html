
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Test Summary</title>
	<link rel="stylesheet" href="arr.report.1.1.1.css">
	<script src="jquery.1.8.2.js"></script>

	<script type="text/javascript">	
	function printTag($node) {
		var $message = '<' + $node.tagName;
		for ( var i = 0; i < $node.attributes.length; i++) {
			$message = $message + ' ' + $node.attributes.item(i).nodeName
					+ '="' + $node.attributes.item(i).nodeValue + '"';
		}
		$message = $message + '>';
		$message = $message + $node.innerHTML;
		$message = $message + '</' + $node.tagName + '>';
		alert($message);
	}

	function printComment($node) {
		var $message = '<!--' + $node.nodeValue + '-->';
		alert($message);
	}

	function printText($node) {
		var $message = $node.nodeName;
		alert($message);
	}

	function findNextSiblingWhichIsNotTextOrComment($node) {
		var $nodeToCheck = $node.nextSibling;
		while ($nodeToCheck.nodeName == '#text'
				|| $nodeToCheck.nodeName == '#comment') {
			if ($nodeToCheck.nodeName == '#text') {
				//printText($nodeToCheck);
			} else {
				//printComment($nodeToCheck);
			}
			$nodeToCheck = $nodeToCheck.nextSibling;
		}
		return $nodeToCheck;
	}

	function infoLayerShow($infoButton) {
		//printTag($infoButton); // A

		$divInformation = findNextSiblingWhichIsNotTextOrComment($infoButton);
		//printTag($divInformation); // DIV information

		$divInformation.style.visibility = 'visible'; // takes up space, can be seen
	}

	function infoLayerHide($closeButton) {
		//printTag($closeButton); // A

		$divInformation = $closeButton.parentNode;
		//printTag($divInformation); // DIV information

		$divInformation.style.visibility = 'hidden'; // takes up space, can't be seen
	}

	//  <tr> rule row
	//    <td> 10%
	//      <a>
	//    <td> 90%
	//      <table>
	//        <tr> detail row
	function findFirstDetailRowFromAnchor($a) {
		//printTag($a); // A

		var $td10 = $a.parentNode;
		//printTag($td10); // TD 10%

		var $td90 = findNextSiblingWhichIsNotTextOrComment($td10);
		//printTag($td90); // TD 90%

		var $table = findNextSiblingWhichIsNotTextOrComment($td90.firstChild);
		//printTag($table); // TABLE content

		var $tbody = findNextSiblingWhichIsNotTextOrComment($table.firstChild);
		//printTag($tbody); // TBODY

		var $firstTR = $tbody.firstChild;
		//printTag($firstTR); // TR

		return $firstTR;
	}
	
	// show all but first row, expand table
	function rowsShow($a) {
		//printTag($node); // A
		$a.innerHTML = '<img alt="minus" src="minusb.jpg">';
		$a.setAttribute('onclick', 'rowsHide(this)');

		var $firstTR = findFirstDetailRowFromAnchor($a);
		var $currentNode = $firstTR.nextSibling;
		while (($currentNode.nodeName != '#comment')
				|| ($currentNode.nodeValue != 'TEST_STEPS')) {
			//alert("whileLoop, $currentNode.nodeName:"+$currentNode.nodeName);
			if ($currentNode.nodeName == 'TR') {
				$currentNode.style.display = ''; // takes up space, can be seen
			}
			$currentNode = $currentNode.nextSibling;
		}
	}

	// collapse all but first row, collapse table
	function rowsHide($a) {
		//printTag($node); // A
		$a.innerHTML = '<img alt="plus" src="plus3.jpg">';
		$a.setAttribute('onclick', 'rowsShow(this)');

		var $firstTR = findFirstDetailRowFromAnchor($a);
		var $currentNode = $firstTR.nextSibling;
		while (($currentNode.nodeName != '#comment')
				|| ($currentNode.nodeValue != 'TEST_STEPS')) {
			//alert("whileLoop, $currentNode.nodeName:"+$currentNode.nodeName);
			if ($currentNode.nodeName == 'TR') {
				$currentNode.style.display = 'none'; // takes up no space, can't be seen
			}
			$currentNode = $currentNode.nextSibling;
		}
	}
	
	// add image to all rows with multiple details
	function rowsInitialize($a) {
		var $firstTR = findFirstDetailRowFromAnchor($a);
		var $currentNode = $firstTR.nextSibling;
		while (($currentNode.nodeName != '#comment')
				|| ($currentNode.nodeValue != 'TEST_STEPS')) {
			//alert("whileLoop, $currentNode.nodeName:"+$currentNode.nodeName);
			if ($currentNode.nodeName == 'TR') {
				$a.innerHTML = '<img alt="minus" src="minusb.jpg">';
				$a.setAttribute('onclick', 'rowsHide(this)');
			}
			$currentNode = $currentNode.nextSibling;
		}
	}

	$(document).ready(function() {
		
		// Add expand/collapse to all rule rows with multiple details
		$('tr.testRuleRow').each (function () {
			var $testRuleRow = this;
			//printTag($testRuleRow);
			
			var $td10 = findNextSiblingWhichIsNotTextOrComment($testRuleRow.firstChild);
			//printTag($td10);
			
			var $a = findNextSiblingWhichIsNotTextOrComment($td10.firstChild);
			//printTag($a);
			
			rowsInitialize($a);
		});

		// For the Modal Dialog Mask and Close Function
		$( ".modalInput" ).each(function () {
			var anchor = this;
			var rel = anchor.getAttribute("rel");
			var relParent = anchor.getAttribute("relParent");
			var relParentElement = $(relParent)[0];
			//console.log("rel:"+rel+" relParent:"+relParent);
			//console.log("relParentElement:"+JSON.stringify(relParentElement));
			anchor.addEventListener("click", function(){
				$(rel).each(function () {
					var modalDialog = this;
					modalDialog.style.display = "block";
					//console.log("relParentElement.clientWidth:"+relParentElement.clientWidth+" relParentElement.clientHeight:"+relParentElement.clientHeight);
					//console.log("modalDialog.clientWidth:"+modalDialog.clientWidth+" modalDialog.clientHeight:"+modalDialog.clientHeight);
					var left = (relParentElement.clientWidth - modalDialog.clientWidth)/2;
					//console.log("left:"+left);
					modalDialog.style.left = left+"px";
				});

				$(rel+"_MASK").each(function () {
					var mask = this;
					mask.style.display = "block";
					mask.style.height = relParentElement.clientHeight+"px";
				});
			});
		});
		
		$( ".close").each(function() {
			var image = this;
			image.addEventListener("click", function(){
				$(".modal").each(function () {
					var modalDialog = this;
					modalDialog.style.display = "none";
				});

				$(".exposeMask").each(function () {
					var mask = this;
					mask.style.display = "none";
				});
			});
		});

		window.addEventListener("keyup", function(e){
			// use e.keyCode
		    if (e.keyCode == 27) { // escape key maps to keycode `27`

				$(".modal").each(function () {
					var modalDialog = this;
					modalDialog.style.display = "none";
				});

				$(".exposeMask").each(function () {
					var mask = this;
					mask.style.display = "none";
				});
		    }
		});
	});
</script>
</head>
<body>
	<div id="failedAPIContent"
		style="border-radius: 4px 4px 4px 4px; box-shadow: 0px 4px 2px rgba(0, 0, 0, 0.3);">
		<TABLE BORDER=0 style="margin-left: 0;" width="100%">
			<!-- Rule Reason color from #02397e to grey to #cbcbcb -->
			<TR class="ruleCodeReasonRow">
				<TH width="10%">Rule Code</TH>
				<TH width="90%">Reason</TH>
			</TR>
			<!--EXCEPTION_TEMPLATE
			<div
				style="position: relative; top: 255px; left: 200px; font-size: 0.9em; word-wrap: break-word; text-decoration: none;">
				Oops.. error generating test failure report..
				STACK_ELEMENT_TEMPLATE
				<br>Class: /*CLASS_VALUE*/arr.AccessibilityRulesetRunnerTest/*CLASS_VALUE*/
				<br>Method: /*METHOD_VALUE*/main/*METHOD_VALUE*/
				<br>Line #: /*LINE_VALUE*/128/*LINE_VALUE*/
				</br>
				STACK_ELEMENT_TEMPLATE
			</div>
			EXCEPTION_TEMPLATE-->
			<!--ROWS_TEMPLATE--><!--ROW_TEMPLATE-->
			<TR class="testRuleRow">
				<TD width="10%" style="padding-left: 5px;" valign="top">
					<!--EXPAND COLLAPSE BUTTON--><a class="button"></a><!--EXPAND COLLAPSE BUTTON-->
					<!--FAILED_RULE_OUTER--><!--FAILED_RULE--><!--RULE_CODE1-->037<!--RULE_CODE1--> 
					(<!--COMPLIANCE_LEVEL1-->AA<!--COMPLIANCE_LEVEL1-->) 
					<br>
					<!--OVERLAY_ANCHOR_SOURCE--><a title='View Rule Help Overlay' class='modalInput' rel='#0Skip_HELP'><!--OVERLAY_ANCHOR_SOURCE-->
						<img alt='question' src='question.png' />
					</a>
					<!--WCAG_ANCHOR_SOURCE--><a target='_blank' title='Rule - WCAG Documentation' href='http://www.w3.org/TR/2007/WD-UNDERSTANDING-WCAG20-20071211/navigation-mechanisms-skip.html'><!--WCAG_ANCHOR_SOURCE--><img alt='WCAG' style='width: 23px; height: 17px;' src='W3C.png' /></a>
<!--EMAILER_LINK--><a id='emailerLink' title='Rule - Email Bug Details' href="mailto:sizu@ebay.com?subject=Please look into the following bug identified by ARR&body=Test Details:%0A  Page Name: Test%0A  URL: http://www.ebay.com%0A  Rule Name: ruleSkiptoMainContent%0A  Rule Code: 0Skip%0A  Rule Compliance Level: AA%0A%0AReasons:%0A  1 . This page has no skip to main content target.  Try &lt;div id='mainContent' role='main' tabindex='-1'&gt;...&lt;/div&gt;."><!--EMAILER_LINK--><img alt='Emailer' style='width: 17px; height: 17px;' src='Emailer.png' /></a>

<!--PATTERNS_LINK--><!--PATTERNS_LINK_ANCHOR--><a id='patternLink' title='Rule - Accessibility Pattern' target='_blank' href='https://github.corp.ebay.com/pages/accessibility/patterns/navigation/skipto.html'><!--PATTERNS_LINK_ANCHOR--><img alt='Accessibility Patterns' alt="MIND" style='width: 17px; height: 17px;' src='MIND4.png' /></a><!--PATTERNS_LINK-->
					<!--OVERLAY_ANCHOR_TARGET--><div class='modal' id='0Skip_HELP' style='background-color:#fff;display:none;padding:15px;border:2px solid #333;-webkit-border-radius:6px;'><!--OVERLAY_ANCHOR_TARGET-->
						<h1>
							<!--RULE_NAME-->H37 Image Tag Alt Attribute<!--RULE_NAME-->
						</h1>
						<b>Rule Code:</b>
						<!--RULE_CODE2-->037<!--RULE_CODE2-->
						<br /> <b>Compliance Level:</b>
						<!--COMPLIANCE_LEVEL2-->AA<!--COMPLIANCE_LEVEL2-->
						<!--RULE_DETAILS--><!--H37_PAI-->
	<h3>Description</h3>
	<ol>
		<li>This method conforms to the WCAG rule <a
			href="http://www.w3.org/TR/2012/NOTE-WCAG20-TECHS-20120103/H37.html">H37</a>.
		</li>
		<li>This rule identifies for the presence of alt text for all the
			image tag that is not an ancestor of anchor tag.Also checks for the presentational image through its width and height.</li>
	</ol>
	<h3>Procedure</h3>
	<ul>
		<li>Found all the image tags in the page.</li>
		<li>Checked for the presence of alt text associated with it.</li>
	</ul>
	<!--H37_PAI--><!--RULE_DETAILS-->
						<img class='close' src='close.png' />
					</div>
					<!--OVERLAY_MASK_TARGET--><!--OVERLAY_MASK_TARGET-->
					<!--FAILED_RULE-->
					<!--FAILED_RULE_OUTER-->
				</TD>
				<TD width="90%" style="word-break: break-all;" valign="top">
					<!--REASONS--><!--REASON-->
					<table width="100%" border=0>
						<!--TEST_STEPS--><!--TEST_STEP_ITEM-->
						<tr class='testDetailRow'>
							<td>
								<!--TEST_STEP_DETAILS-->1 . This page has no skip to main content target.  Try &lt;div id='mainContent' role='main' tabindex='-1'&gt;...&lt;/div&gt;.<br>

<a title='View Element in Snapshot Overlay' class='modalInput' rel='#TestHTML_FF_20_57_43_518_'><img alt='camera' style='width: 32px; height: 25px;' src='cam.png' /></a><div class='modal' id='TestHTML_FF_20_57_43_518_' style='background-color:#fff;display:none;padding:15px;border:2px solid #333;-webkit-border-radius:6px;'><image src='TestHTML_FF_20_57_43_518_.jpg' width='100%' height='100%'/><br><img class='close' src='close.png' /></div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tag=html<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xpath=/html[1]<!--TEST_STEP_DETAILS-->
							</td>
						</tr>
						<!--TEST_STEP_ITEM--><!--TEST_STEPS-->
					</table>
					
					<!--REASON--><!--REASONS-->
				</TD>
			</TR>
			<!--ROW_TEMPLATE--><!--ROWS_TEMPLATE-->
		</TABLE>
		
		
</body>
</html>
